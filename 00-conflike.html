---
layout: conflike
title: Programme
visible: 1
permalink: /conflike/
---

<script type="text/javascript">
  var userID = '';
  
  function UniqueUserID() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
      var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
      return v.toString(16);
    });
  }
  
  function initializeUserID() { //called on page load (see layout file)
    userID = UniqueUserID(); // Global Variable do not touch

    if (localStorage.userID != '' && localStorage.userID != undefined) {
      userID = localStorage.userID;
    }
    
    url_id_paramater=window.location.search.substring(1).replace('&','').replace('id=','');
    if (url_id_paramater != '' && url_id_paramater != undefined) {
      userID = url_id_paramater;
    }
    
    localStorage.userID = userID;
    document.getElementById('userid').innerHTML=userID;
  }
</script>

<script type="text/javascript">
  function setVote(value, confID){
    document.getElementById(confID + '/vote').innerHTML=value;
    var labels= {"-2": "Pas Super", "-1": "Moyen", "+1": "Bien", "+2": "Très bien"};
    document.getElementById(confID + '/vote/label').innerHTML='(' + labels[value] + ')';
  }
  function setComment(value, confID){
    document.getElementById(confID + '/comment').value=value;
  }  
  function setCheckStatus(value, confID) {
    document.getElementById(confID + '/check').checked = value;
  }  
  function getVote(confID) {
    var vote = document.getElementById(confID + '/vote').innerHTML;
    return vote;
  }
  function getCheckStatus(confID) {
    var checkStatus = document.getElementById(confID + '/check').checked;
    return checkStatus;
  }  
  function getComment(confID) {
    var comment = document.getElementById(confID + '/comment').value;
    if (comment == "") comment = "-"; //Attribute can not be empty with DynamoDB
    return comment;
  }
  function getConfName(confID) {
    var confname = document.getElementById(confID + '/confname').innerHTML;
    if (confname == "") confname = "-"; //Attribute can not be empty with DynamoDB
    return confname;
  }  
 
  function save(confID) {
    var checkStatus = getCheckStatus(confID);
    var confname = getConfName(confID);
    var vote = getVote(confID);
    var comment = getComment(confID);

    var api_id = '3gwmfohd5g';
    var url = 'https://'+ api_id +'.execute-api.eu-west-1.amazonaws.com/prod/ConfLike?userid=' + userID;
    var data = '{ \
      "ConfID"  : { "S": "' + confID + '" }, \
      "ConfName": { "S": "' + confname + '" }, \
      "UserID"  : { "S": "' + userID + '" }, \
      "Vote"    : { "S": "' + vote + '"}, \
      "Comment" : { "S": "' + comment.replace(/\n/g, "\\n") + '"}, \
      "Checked" : { "BOOL": "' + checkStatus + '" \
    }}';

    var request = $.ajax({
      url: url,
      method: "POST",
      contentType: "application/json",  
      data: data
    });
 
    request.done(function( msg ) {
      // alert(JSON.stringify(msg, null, 2));
    });
     
    request.fail(function( jqXHR, textStatus ) {
      alert( "failed:\n" + JSON.stringify(jqXHR, null, 2));
    });    
  }
  
  function update() { //called on page load (see layout file)
    var api_id = '3gwmfohd5g'; 
    var url = 'https://'+ api_id +'.execute-api.eu-west-1.amazonaws.com/prod/ConfLike?userid=' + userID;

    var request = $.ajax({
      url: url,
      method: "GET"
    });

    request.done(function( response ) {
      var items = response.Items;
      for(var i = 0; i < items.length; i++) {
        var item=items[i];
        var confID=item.ConfID.S;
        setVote(item.Vote.S, confID);
        setComment(item.Comment.S, confID);
        setCheckStatus(item.Checked.BOOL, confID);       
      }
    });
     
    request.fail(function( jqXHR, textStatus ) {
      alert( "failed:\n" + JSON.stringify(jqXHR, null, 2));
    });  
  }
</script>

<script type="text/javascript">
  function toggleDayDisplay(dayID) {
    day_div = document.getElementById(dayID)
    if (day_div.style.display == "block") {
      day_div.style.display = "none"
    } else {
      day_div.style.display = "block"
    }
  }
</script>

<div class="container">
  <div class="row">    
      <div id="demo-12-col" class="col-xs-12">
          <div class="col-xs-12" style="font-size:24px;padding:15px;text-align:center;background-color:lightgrey;text-decoration:none">AGILE TOUR LILLE 2016</div>
      </div>
  </div>
  
  <div style="text-align: center; border-width:2px; border-color:black; border-style:dotted">
    <div>
      URL à envoyer sur votre mobile si vous voulez faire votre sélection sur PC par exemple
    </div>
    <div>
      Elle vous permettra de retrouver vos données
    </div>    
    <div>
      Elle est Inutile si vous faites votre sélection sur mobile le jour J
    </div>    
    <div style="color:blue">
      <span>http://2016.agiletour-lille.org/conflike</span><span>?</span><span>id=</span><span id="userid">?</span>
    </div>
  </div>

 
  {% for day in site.data.schedule %}
    <div class="row">
    <div id="" class="col-xs-12" style="margin:1px" onclick="toggleDayDisplay('{{ day.date | replace:' ','_' }}')">
      <a class="col-xs-12" 
         href="/conflike/#{{ day.date | replace:' ','_' }}" 
         style="padding:10px;text-align:center;background-color:orange;text-decoration:none">
         {{ day.date }} 
      </a>
    </div>
    </div>
    <div id="{{ day.date | replace:' ','_' }}" style="display:none">
      <div class="row"> 
        {% for part in day.schedule %}
          {% for slot in part %}
            <div id="{{ day.date | replace:' ','_' }}_{{ slot.hour }}" class="col-xs-12" style="margin:1px">
                <a class="col-xs-12" 
                   href="/conflike/#{{ day.date | replace:' ','_' }}_{{ slot.hour }}" 
                   style="padding:10px;text-align:center;background-color:lightgreen;text-decoration:none">
                  {{ day.date }} - {{ slot.hour  }}
                </a>
            </div>
            {% for talk in slot.content %}
              <div class="col-xs-12" id="{{ day.date | replace:' ','_' }}_{{ slot.hour }}" style="margin:1px">
                <div class="col-xs-2" style="text-align:center;">
                  <label>
                    <input type="checkbox" id="{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}/check" name="" value="" onchange="save('{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}')">                
                    {{ day.date| replace:'13 octobre', 'Jeudi'| replace:'14 octobre', 'Vendredi' }}
                    </br>
                    {{ slot.hour }}
                  </label>
                </div>
                <!--<span>{{ slot.special}}</span>-->
                <div class="col-xs-3">
                  </br>
                  {{ talk.room }}
                </div>
                <a class="col-xs-7" href="/conflike/#{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}" style="text-align:center;background-color:lightgrey;text-decoration:none">
                    </br>
                    {{ talk.label }}
                    {{ talk.subject }}
                    </br>
                    {% if talk.speaker != nil %} 
                      ({{ talk.speaker }})
                      </br>
                    {% endif %}
                    </br>
                </a>
              </div>
            {% endfor %}
          {% endfor %}
        {% endfor %}
      </div>
      <div class="row"> 
        {% for part in day.schedule %}
          {% for slot in part %}
            {% for talk in slot.content %}
              <div style="border-color:blue; border-width:3px; border-style:dotted" id="{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}" >
                <div style="text-align:center">
                  <div class="alert alert-success">{{ day.date }} / {{slot.hour}} / {{ talk.room }}</div>
                </div>    
                <div style="text-align:center">
                  <div id="{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}/confname" class="alert alert-success">{{ talk.label }}{{ talk.subject }}</div>
                </div>
                <div style="text-align:center">
                  <div class="alert alert-success">{{ talk.speaker }}</div>
                </div>    
                <div style="text-align:center">
                  <div class="alert alert-info">Qu'avez vous pensé de cette conférence ?</div>
                </div>
                
                <span>Votre Note: </span>
                <span id="{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}/vote" style="visibility:visible">0</span>
                <span id="{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}/vote/label" style="visibility:visible">(Pas de note pour le moment)</span>
                <div class="btn-group btn-group-justified">
                  <div class="btn-group">
                    <button type="button" class="btn btn-primary" id="not_great" onclick="setVote('-2', '{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}');save('{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}')">
                      Pas Super
                    </button>
                  </div>
                  <div class="btn-group">
                    <button type="button" class="btn btn-primary" id="so_so" onclick="setVote('-1', '{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}');save('{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}')">
                      Moyen
                    </button>
                  </div>
                  <div class="btn-group">
                    <button type="button" class="btn btn-primary" id="good" onclick="setVote('+1', '{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}');save('{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}')">
                      Bien
                    </button>
                  </div>
                  <div class="btn-group">
                    <button type="button" class="btn btn-primary" id="very_good" onclick="setVote('+2', '{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}');save('{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}')">
                      Très bien
                    </button>
                  </div>
                </div>
                </br>
                <div>Votre commentaire :</div>
                <div class="form-group">
                  <textarea class="form-control" rows="5" id="{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}/comment" onkeyup="save('{{ day.date | replace:' ','_' }}_{{slot.hour}}-{{ talk.room }}')"></textarea>
                </div>
              </div>
            {% endfor %}
          {% endfor %}
        {% endfor %}
      </div>
    </div>
  {% endfor %}

</div>